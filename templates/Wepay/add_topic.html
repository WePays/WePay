{% extends 'WePay/base_wepay.html' %}
{% load static %}

{%block title%}
{{ block.super }}
Create Bills
{% endblock title%}

{% block body%}
<div class="right-section" style="margin-top: 5%; margin-left: 40%;">
  <h3>Add Topic By: {{bill.header}}</h3><p>Name of Bill: {{bill.name}}</p>Total price: {{bill.total_price}}


  <form action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
  <div class="topic-name" style="margin-top: 2%;"> Name: <br>
    <input type="text" name="topic_name" id="topic_name" placeholder="Enter the topic name" required style="width: 40%; font-weight: lighter;"></div>
  <div class="topic-price" style="margin-top: 2%;"> Price: <br>
    <input type="number" min="0" name="topic_price" id="topic_price" placeholder="Enter the topic price" required style="width: 40%; font-weight: lighter;"></div>

  <div class="add-user" style="margin-top: 2%;" for="username">Enter user to assign:<br>
    <select id="username" name="username"  multiple required style="width: 40%; height: 20%">
      {% for name in lst_user %}
        <option value="{{name}}">{{name}}</option>
      {% endfor %}
    </select>
  </div>
  <div class="add-topic" style="margin-top: 2%; margin-left: 30%;"><input type="submit" value="Add topic"></div>

</div>


<table class="styled-table" style="width: 30%; height: 50%; text-align: center; display: table;">
    <thead>
      <tr>
        <th> No. </th><style>th{padding-left: 1%; text-align: center;}</style>
        <th> title </th>
        <th> Price </th>
        <th> User to assign </th>
      </tr>
    </thead>

    {% for topic in all_topic %}
    <tbody>
      <tr>
        <td>{{forloop.counter0|add:"1"}}</td><style>td{padding: 1%;}</style>
        <td>{{topic.title}}</td> <!-- this will link to detail bill page-->
        <td>{{topic.price}}</td>
        <td>{% for each_user in topic.user.all %}{{each_user}}, {% endfor %}</td> 
        
      </tr>
      </tbody>
      {% endfor %}
  </list>
</ul>
</table>
</form>






{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}


<form action="{% url 'bills:success' bill.id %}" method="post">
    {% csrf_token %}
    <input type="submit" value="Create Bill">
</form>

{% endblock body%}
